<% show_pagination = true if show_pagination.nil? %>
<%= page_entries_info jobs if show_pagination %>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Posted</th>
      <th>Title</th>
      <th>Tags</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% jobs.each do |job| %>
      <tr>
        <td>
          <div><%= job.published_at? ? l(job.published_at.to_date) : 'Unpublished'%></div>
          <%= render_job_badge(job) %>
        </td>
        <td>
          <%= link_to job.title, job %>
          <div><%= link_to job.employer.name, job.employer if job.employer %></div>
          <div class="small"><%= job.location%></div>
        </td>
        <td>
          <% job.tags.each do |tag| %>
            <%= link_to tag.name, tag_path(tag.name), class: 'badge badge-default' %>
          <% end %>
        </td>
        <% if can? :manage, job %>
          <td><%= link_to 'Publish', publish_job_path(job), class: 'btn btn-primary publish', remote: true unless job.published? %></td>
          <td><%= link_to 'Edit', edit_job_path(job), class: 'btn btn-secondary' %></td>
          <td><%= link_to 'Destroy', job, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate jobs, theme: 'twitter-bootstrap-4' if show_pagination %>
